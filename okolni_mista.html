<!DOCTYPE html>
<html>
<head>
    <title>Náhodné místo</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>

<div id="mapid" style="height: 600px;"></div>

<script>
// Seznam míst
let places = [
  {x: 50.0755, y: 14.4378, name: 'Praha'},
  {x: 50.5, y: 14.9, name: 'Kosmonosy'},
  {x: 50.8, y: 15, name: 'Liberec'},
  // další místa...
];

// Náhodně vybrané místo
let randomIndex = Math.floor(Math.random() * places.length);
let selectedPlace = places[randomIndex];

// Vzdálenost v km
let n = 1;

// Haversine vzorec pro výpočet vzdušné vzdálenosti
function haversineDistance(place1, place2) {
  let R = 6371; // poloměr Země v km
  let dLat = (place2.x - place1.x) * Math.PI / 180;
  let dLon = (place2.y - place1.y) * Math.PI / 180;
  let a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.cos(place1.x * Math.PI / 180) * Math.cos(place2.x * Math.PI / 180) *
          Math.sin(dLon/2) * Math.sin(dLon/2);
  let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  return R * c;
}

// Filtrujeme místa v okruhu n km
let nearbyPlaces = places.filter(place => haversineDistance(selectedPlace, place) <= n);

// Vytvoříme mapu
let map = L.map('mapid').setView([50, 14], 7);

// Přidáme vrstvu OpenStreetMap
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// Přidáme body na mapu
nearbyPlaces.forEach(place => {
  L.marker([place.x, place.y]).addTo(map)
    .bindPopup(place.name)
    .openPopup();
});
</script>

</body>
</html>
