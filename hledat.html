<head>
<script>



  
//--------------------------------------------------------------------------------
//---------načtení zadaných parametrů--------------------------------------------
//--------------------------------------------------------------------------------
  
// Vytvoření objektu URL
let url = new URL(window.location.href);

// Získání hodnoty parametru "kategorie"
let kategorie = 0;
let kraj = 0;
  
kategorie = url.searchParams.get("kategorie");
kraj = url.searchParams.get("kraj");

// Vypsání hodnoty parametru "kategorie"
console.log(kategorie);
alert(kategorie);






  
  let geojsonFiles = ["KHK_arch.geojson", 
                      "KHK_cirkev_pamatky.geojson", 
                      "KHK_infocentra.geojson", 
                      "KHK_muzea.geojson", 
                      "KHK_pevnosti.geojson", 
                      "KHK_prirodni_zajimavosti.geojson", 
                      "KHK_rozhledny.geojson",
                      "KHK_zidov_cirkev.geojson", 
                      "USK_cirkev_hroby.geojson"];
  let filtr_kategorie = kategorie // parametr č2 (kategorie)
  let filtr_kraj = kraj

//--------------------------------------------------------------------------------
//---------vyfiltrování datových sad podle kraje------------------------------
//--------------------------------------------------------------------------------

  let filtrat = [];
  j = 0;
  for (let i = 0; i < geojsonFiles.length; i++) {
    if (geojsonFiles[i].includes(kraj)) {
        filtrat[j] = geojsonFiles[i];
        j++;
    }
  }
  alert("kraj:" + kraj);
  alert("filtrát po kraji:" + filtrat);
  
//--------------------------------------------------------------------------------
//---------vyfiltrování datových sad podle kategorií------------------------------
//--------------------------------------------------------------------------------

let filtrat_2 = [];
for (let i = 0; i < filtrat.length; i++) {
    if (filtrat[i].includes(kategorie)) {
        filtrat_2 = filtrat[i];
        break;
    }
}

console.log(filtrat_2);
alert(filtrat_2);
//--------------------------------------------------------------------------------
//---------načtení bodů z odfiltrovaných seznamů do pole--------------------------
//--------------------------------------------------------------------------------

const geojsonFile = 'KHK_muzea.geojson';

        // Načtení obsahu souboru pomocí Fetch API
        fetch(geojsonFile)
            .then(response => response.json())
            .then(data => {
                const body = [];

                // Zpracování GeoJSON dat
                if (data.type === 'FeatureCollection') {
                    data.features.forEach(feature => {
                        if (feature.type === 'Feature' && feature.geometry.type === 'Point') {
                            const nazev = feature.properties && feature.properties.nazev;
                            const souradnice = feature.geometry.coordinates;

                            if (nazev && souradnice) {
                                body.push({
                                    nazev: nazev,
                                    souradnice: souradnice
                                });
                            }
                        }
                    });

                    // Výpis pole s informacemi o bodech
                    console.log('Informace o bodech:', body);
                    alert(body);
                } else {
                    console.error('Neočekávaný typ GeoJSON. Očekáváme FeatureCollection.');
                    alert("CHYBA NAČÍTÁNÍ GEOJSON");
                }
            })
            .catch(error => {
                console.error('Chyba při načítání GeoJSON:', error);
            });
  
//--------------------------------------------------------------------------------
//---------přesměrování na mapu s vyzobrazenými body------------------------------
//--------------------------------------------------------------------------------

document.write("<meta http-equiv='refresh' content='7;url=mapa.html?kategorie="+filtrat_2+"'>");



  
</script>
</head>
<body>

</body>
