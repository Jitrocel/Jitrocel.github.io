<head>
<script>



  
//--------------------------------------------------------------------------------
//---------načtení zadaných parametrů--------------------------------------------
//--------------------------------------------------------------------------------
  
// Vytvoření objektu URL
let url = new URL(window.location.href);

// Získání hodnoty parametru "kategorie"
let kategorie = 0;
let kraj = 0;
  
kategorie = url.searchParams.get("kategorie");
kraj = url.searchParams.get("kraj");

// Vypsání hodnoty parametru "kategorie"
console.log(kategorie);
alert(kategorie);






  
  let geojsonFiles = ["KHK_arch.geojson", 
                      "KHK_cirkev_pamatky.geojson", 
                      "KHK_infocentra.geojson", 
                      "KHK_muzea.geojson", 
                      "KHK_pevnosti.geojson", 
                      "KHK_prirodni_zajimavosti.geojson", 
                      "KHK_rozhledny.geojson",
                      "KHK_zidov_cirkev.geojson", 
                      "USK_cirkev_hroby.geojson"];
  let filtr_kategorie = kategorie // parametr č2 (kategorie)
  let filtr_kraj = kraj

//--------------------------------------------------------------------------------
//---------vyfiltrování datových sad podle kraje------------------------------
//--------------------------------------------------------------------------------

  let filtrat = [];
  j = 0;
  for (let i = 0; i < geojsonFiles.length; i++) {
    if (geojsonFiles[i].includes(kraj)) {
        filtrat[j] = geojsonFiles[i];
        j++;
    }
  }
  alert("kraj:" + kraj);
  alert("filtrát po kraji:" + filtrat);
  
//--------------------------------------------------------------------------------
//---------vyfiltrování datových sad podle kategorií------------------------------
//--------------------------------------------------------------------------------


for (let i = 0; i < filtrat.length; i++) {
    if (filtrat[i].includes(kategorie)) {
        filtrat_2 = filtrat[i];
        break;
    }
}

console.log(filtrat_2);
alert(filtrat_2);
//--------------------------------------------------------------------------------
//---------načtení bodů z odfiltrovaných seznamů do pole--------------------------
//--------------------------------------------------------------------------------
  // Příklad pro Node.js:
const fs = require('fs');

// Funkce pro načítání geojson souboru
function loadGeoJSON(filePath) {
  try {
    const fileContent = fs.readFileSync(filePath, 'utf8');
    const geoJSON = JSON.parse(fileContent);
    return geoJSON;
  } catch (error) {
    console.error('Chyba při čtení geojson souboru:', error.message);
    return null;
  }
}

// Funkce pro extrahování názvů a poloh bodů z geojson
const geoJSON = loadGeoJSON("KHK_rozhledny.geojson");
function extractPoints(geoJSON) {
  const points = [];

  if (geoJSON && geoJSON.features) {
    geoJSON.features.forEach(feature => {
      if (feature.geometry && feature.geometry.type === 'Point') {
        const point = {
          name: feature.properties && feature.properties.name ? feature.properties.name : '',
          coordinates: feature.geometry.coordinates
        };
        points.push(point);
      }
    });
  }

  return points;
  alert(extractPoints(geoJSON));
  
//--------------------------------------------------------------------------------
//---------přesměrování na mapu s vyzobrazenými body------------------------------
//--------------------------------------------------------------------------------

document.write("<meta http-equiv='refresh' content='0;url=mapa.html?kategorie="+filtrat_2+"'>");



  
</script>
</head>
<body>

</body>
